{
  "entities": {
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserProfile",
      "type": "object",
      "description": "Represents a user profile within the Voaya application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user profile."
        },
        "email": {
          "type": "string",
          "description": "User's email address.",
          "format": "email"
        },
        "firstName": {
          "type": "string",
          "description": "User's first name."
        },
        "lastName": {
          "type": "string",
          "description": "User's last name."
        },
        "dateJoined": {
          "type": "string",
          "description": "Date when the user joined the platform.",
          "format": "date-time"
        },
        "lastLogin": {
          "type": "string",
          "description": "Date of the user's last login.",
          "format": "date-time"
        },
        "preferredCurrency": {
          "type": "string",
          "description": "Preferred currency for transactions (e.g., USD, EUR)."
        },
        "profilePicture": {
          "type": "string",
          "description": "URL to the user's profile picture.",
          "format": "uri"
        }
      },
      "required": [
        "id",
        "email",
        "firstName",
        "lastName",
        "dateJoined"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}/profile",
        "definition": {
          "entityName": "UserProfile",
          "schema": {
            "$ref": "#/backend/entities/UserProfile"
          },
          "description": "Stores user profile information. The userId path parameter ensures that only the authenticated user can access their own profile data.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to manage user profiles with a focus on scalability, security, and ease of maintenance. It leverages path-based ownership for user profiles to ensure that only the authenticated user can access their profile data. This approach simplifies security rules and eliminates the need for complex authorization logic. This approach is secure and makes ownership-based security rules simple and efficient."
  }
}